# 네트워크 코어

<br>

## 1. 패킷 교환

----

### 1) 과정

 - 종단 시스템은 패킷의 헤더에 목적지의 IP 주소를 담아서 보냄
 - 패킷은 링크를 따라 라우터로 이동
 - 라우터는 IP 주소를 이용하여 포워딩 테이블을 검색하여 적절한 출력링크로 보냄
   * `포워딩 테이블` : 라우팅 프로토콜에 따라 자동으로 최단 경로를 결정되고 포워딩 테이블이 설정됨

### 2) 지연
 - `저장 후 전달` : 라우터는 패킷의 모든 비트를 버퍼에 수신한 후에 출력 링크로 전송
    * 전송률이 R, 비트의 수가 L, 링크의 수가 N일 때 종단간 지연은 N * (L / R)
 - `큐잉 지연` : 출력 링크가 다른 패킷을 전송 중이라면 그 링크로 나가야 하는 다른 패킷은 대기
 - `패킷 손실` : 큐잉 지연이 일어나는 도중 버퍼의 크기를 초과한 패킷이 들어오게 되면 도착 패킷 혹은 대기중인 패킷 중 일부를 폐기

<br>

## 2. 회선 교환

----

### 1) 과정

 - 필요한 자원을 통신 세션 동안에 예약
 - 송신자와 수신자 간의 연결(회선)을 설정
 - 송신자는 수신자에게 일정한 전송률로 데이터를 보냄

### 2) 회선의 구현
 - `FDM(주파수 분할 다중화)` : 대역이 제한된 전송회선의 주파수 대역을 분할하고 그 중 할당받아 연결하여 사용
 - `TDM(시분할 다중화)` : 시간을 일정 주기의 프레임으로 구분하고 각 프레임을 시간 슬롯으로 나누어 그 시간 슬롯에 연결하여 사용
  * TDM 시간 계산 : 회선 설정 시간 + (비트 수 / (전송률 / 슬롯 수))

<br>

### 3. 패킷 교환과 회선 교환

----

|   | 패킷 교환  | 회선 교환  |
|:-:|:-:|:-:|
| 링크 사용  | 요구 시에만  | 요구가 없어도 미리 설정한 만큼  |
| 예측  | 어려움(큐잉 지연 문제)  | 가능  |
| 효율성  | 높음  | 낮음(비활용 기간 존재)  |
| 구현 비용  | 적음  | 큼(회선 설정, 대역폭 보존)  |

<br>

### 4. 네트워크의 네트워크
```
모든 접속 ISP들이 연결되는 구조
```
#### 네트워크 구조 5
- `1계층 ISP` : 여러 1계층 ISP를 통해 모든 접속 ISP가 연결
- `콘텐츠 제공자(구글)` : 하위 계층 ISP들과 피어링을 함으로 상위 계층을 우회, 연결 안 된 하위 ISP도 많으므로 1계층 ISP와 연결
- `IXP` : 여러 ISP들이 피어링 하는 장소
- `지역 ISP` : 특정 지역의 접속 ISP들을 연결하는 ISP
- `접속 ISP` : 종단 시스템은 인터넷에 연결하는 ISP
  * 고객 ISP는 서비스 제공 ISP에 비용을 지불
  * `피어링` : 접속 ISP가 직접 송수신 함으로 비용을 줄임  
